{% extends 'frontend/base/base.html' %}
{% load static %}
{% block style %}

    {% load cars_filters %}

    <style>
        div.sticky {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            font-size: 20px;
        }
    </style>
{% endblock %}
{% block content %}
    <!-- banner -->
    <section class="banner">
<<<<<<< HEAD
        {% csrf_token %}
=======

>>>>>>> 64b2e4937fc7ce39de6dbbb14c7799929714df23
        <div class="banner-innerpage Category_banner">
            <div class="container">
                <!-- Row  -->
                <div class="row justify-content-center ">
                    <!-- Column -->
                    <div class="text-center">
                        {#                        <h1 class="title">       </h1>#}
                        <nav aria-label="breadcrumb">
                            {#                        <ol class="breadcrumb">#}
                            {#                            <li class="breadcrumb-item"><a href="#"> </a></li>#}
                            {#                            <li class="breadcrumb-item active" aria-current="page"></li>#}
                            {#                        </ol>#}
                        </nav>
                    </div>
                    <!-- Column -->
                </div>
            </div>
        </div>
    </section>
    <!-- End banner -->
    <!-- listing_left_sidebar -->
    <section class="top_listings">
        <div class="container">

            {% filters %}


            <div class="row m-t-40 margin_top">
                <div class="col-md-3 col-sm-12 col-xs-12">
                    <div class="sidebar-wrapper sticky">
                        <div class="single-sidebar">
                            <form class="search-form" action="#">
                                <input placeholder="Keywords" type="text">
                                <button type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                            </form>
                            {% csrf_token %}
                        </div>
                        <div class="single-sidebar">
                            <div class="sec-title">
                                <h3 class="all-categories">All Category</h3>
                                <ul class="categories clearfix slide">
                                    <li><a href="#">Vehicles (1029)</a></li>
                                    <li><a href="#">Electronics (175)</a></li>
                                    <li><a href="#">Mobiles (1800)</a></li>
                                    <li><a href="#">Furniture (3129)</a></li>

                                </ul>
                            </div>
                            <div class="single-sidebar">
                                <div class="sec-title">
                                    <h3 class="condition mb-2">Condition</h3>
                                    <div class="form-group form-check condition-slide">
                                        <input type="checkbox" class="form-check-input">
                                        <label class="form-check-label text-uppercase">New</label>
                                    </div>
                                    <div class="form-group form-check condition-slide">
                                        <input type="checkbox" class="form-check-input">
                                        <label class="form-check-label text-uppercase">Used</label>
                                    </div>
                                </div>

                            </div>
                            <div class="single-sidebar">
                                <div class="sec-title">
                                    <h3 class="post-by mb-2">Posted By</h3>
                                    <div class="form-group form-check post-slide">
                                        <input type="checkbox" class="form-check-input">
                                        <label class="form-check-label text-uppercase">Individual</label>
                                    </div>
                                    <div class="form-group form-check post-slide">
                                        <input type="checkbox" class="form-check-input">
                                        <label class="form-check-label text-uppercase">Dealer</label>
                                    </div>
                                    <div class="form-group form-check post-slide">
                                        <input type="checkbox" class="form-check-input">
                                        <label class="form-check-label text-uppercase">Reseller</label>
                                    </div>
                                    <div class="form-group form-check post-slide">
                                        <input type="checkbox" class="form-check-input">
                                        <label class="form-check-label text-uppercase">Manufacturer</label>
                                    </div>
                                </div>
                            </div>

                            <div class="single-sidebar">
                                <div class="sec-title">
                                    <h3 class="price_r mb-2">Price Range</h3>
                                    <div class="price-range-block">
                                        <div id="slider-range" class="price-filter-range slider-range2"></div>

                                        <div class="m-t-20 m-b-20">
                                            <input type="text" oninput="validity.valid||(value='0');" id="min_price"
                                                   class="price-range-field"/>
                                            <input type="text" oninput="validity.valid||(value='10000');" id="max_price"
                                                   class="price-range-field price-range-field2"/>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
                <div class="col-md-9 col-sm-12 col-xs-12">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 m-b-10">
                            <div class="listing-select-parts d-flex justify-content-between">
                                <div class="listing-select-head-left d-inline-block">
                                    {#                                    <h3> Showing ( 1-12 ccars of 7,371 cars ) </h3>#}
                                </div>
                                <div class="listing-select-head-right d-inline-block ">
                                    <p class="d-inline-block px-3"> View </p>
                                    {#                                <span class="d-inline-block bars px-2"><a href="#"><i class="fa fa-list"></i></a></span>#}
                                    <span class="d-inline-block bars px-2"><a href="#"><i
                                            class="fa fa-th"></i></a></span>
                                    <div class="sort_by d-inline-block pl-3">
                                        <form>
                                            <div class="form-group">
                                                <select class="form-control">
                                                    <option>Short by</option>
                                                    <option>popular</option>
                                                    <option>prize</option>
                                                    <option>relivante</option>
                                                    <option>offers</option>
                                                </select>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="carlist" class="col-md-12 col-lg-12 col-xl-12">
                            {% for car_list in blogs %}

<<<<<<< HEAD
                                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                                    <div class="featured-parts rounded m-t-30">
                                        <div class="featured-img"><a href="{% url 'website:CarList' car_list.id %}">
                                            <img
                                                    class="img-fluid rounded-top"
                                                    src={{ car_list.car_image.url }}
                                                            alt="ClassifiedPlus">
                                        </a>
                                            <div class="featured-new bg_warning1"><a
                                                    href="{% url 'website:CarList' car_list.id %}"> New </a></div>
                                        </div>
                                        <div class="featured-text">
                                            <div class="text-top d-flex justify-content-between ">
                                                <div class="heading"><a href="#">{{ car_list.name }}</a></div>
                                                <div class="book-mark"><a href="#"><i class="fa fa-bookmark"></i></a>
                                                </div>
                                            </div>
                                            <div class="text-stars m-t-5">
                                                <p>{{ car_list.detail }}</p>
                                                <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
                                                    class="fa fa-star"></i>
                                                <i
                                                        class="fa fa-star"></i> <i class="fa fa-star"></i></div>
                                            <div class="featured-bottum m-t-30">
                                                <ul class="d-flex justify-content-between list-unstyled m-b-20">
                                                    <li><a href="#"><i class="fa fa-map-marker"></i>{{ car_list.model }}
                                                    </a>
                                                    </li>
                                                    <li><a href="#"><i class="fa fa-heart-o"></i> Save</a></li>
                                                </ul>
                                            </div>
=======
                        {% for car_list in blogs %}

                            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 h-100 ">
                                <div class="featured-parts rounded m-t-30">
                                    <div class="featured-img"><a href="{% url 'website:CarList' car_list.id %}">


                                        <img
                                                class="img-fluid rounded-top image-height"
                                                src={{ car_list.images.all.0.images.url }}
                                                        alt="ClassifiedPlus">
                                    </a>


                                        <div class="featured-new bg_warning1"><a
                                                href="{% url 'website:CarList' car_list.id %}"> New </a></div>
                                    </div>
                                    <div class="featured-text">
                                        <div class="text-top d-flex justify-content-between ">
                                            <div class="heading"><a href="#">{{ car_list.name }}</a></div>
                                            <div class="book-mark"><a href="#"><i class="fa fa-bookmark"></i></a>
                                            </div>
                                        </div>
                                        <div class="text-stars m-t-5">
                                            <p>{{ car_list.detail }}</p>
                                            <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
                                                class="fa fa-star"></i>
                                            <i
                                                    class="fa fa-star"></i> <i class="fa fa-star"></i></div>
                                        {% if car_list.viewed > 0 %}
                                            <div class="featured-bottum m-t-10">
                                                <span class="fa fa-user"> {{ car_list.viewed }} viewed  </span>
                                            </div>
                                        {% else %}
                                            <div class="featured-bottum m-t-10">

                                            </div>
                                        {% endif %}
                                        <div class="featured-bottum m-t-4">
                                            <ul class="d-flex justify-content-between list-unstyled m-b-20">
                                                <li><a href="#"><i class="fa fa-map-marker"></i>{{ car_list.model }}
                                                </a>
                                                </li>
                                                <li><a href="#"><i class="fa fa-heart-o"></i> Save</a></li>
                                            </ul>
>>>>>>> 64b2e4937fc7ce39de6dbbb14c7799929714df23
                                        </div>
                                    </div>
                                </div>

<<<<<<< HEAD
                            {% endfor %}
                        </div>


=======
>>>>>>> 64b2e4937fc7ce39de6dbbb14c7799929714df23
                        {#                        <div class="clearfix"></div>#}
                        {#                        <div class="col-md-12">#}
                        {#                            <button class="view-btn hvr-pulse-grow" type="submit" value="button">View all</button>#}
                        {#                        </div>#}

<<<<<<< HEAD
=======
                    </div>
                    <div class="prev_next">

                        {% if blogs.has_previous %}
                            <a class="prev btn btn-info" href="?page={{ blogs.previous_page_number }}">Prev</a>
                        {% endif %}
                        {% if blogs.has_next %}
                            <a class="next btn btn-info" href="?page={{ blogs.next_page_number }}">Next</a>
                        {% endif %}
                        {#                        <div class="pages">#}
                        {#                            <ul>#}
                        {#                                {% for pg in blogs.paginator.page_range %}#}
                        {#                                    {% if blogs.number == pg %}#}
                        {#                                        <li><a href="?page={{ pg }}" class="btn btn-default">{{ pg }}</a></li>#}
                        {#                                    {% else %}#}
                        {#                                        <li><a href="?page={{ pg }}" class="btn">{{ pg }}</a></li>#}
                        {#                                    {% endif %}#}
                        {#                                {% endfor %}#}
                        {#                            </ul>#}
                        {#                        </div>#}
                        <span class="clear_both"></span>
>>>>>>> 64b2e4937fc7ce39de6dbbb14c7799929714df23

                        <div class="prev_next">

                            {% if blogs.has_previous %}
                                <a class="prev btn btn-info" href="?page={{ blogs.previous_page_number }}">Prev</a>
                            {% endif %}
                            {% if blogs.has_next %}
                                <a class="next btn btn-info" href="?page={{ blogs.next_page_number }}">Next</a>
                            {% endif %}
                            {#                        <div class="pages">#}
                            {#                            <ul>#}
                            {#                                {% for pg in blogs.paginator.page_range %}#}
                            {#                                    {% if blogs.number == pg %}#}
                            {#                                        <li><a href="?page={{ pg }}" class="btn btn-default">{{ pg }}</a></li>#}
                            {#                                    {% else %}#}
                            {#                                        <li><a href="?page={{ pg }}" class="btn">{{ pg }}</a></li>#}
                            {#                                    {% endif %}#}
                            {#                                {% endfor %}#}
                            {#                            </ul>#}
                            {#                        </div>#}
                            <span class="clear_both"></span>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- End listing_left_sidebar -->
{% endblock %}

{% block script %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            $(".all-categories").on('click', function (e) {
                $(".slide").slideToggle("slow");
            });
        });


        $(document).ready(function () {
            $(".condition").on('click', function (e) {
                $(".condition-slide").slideToggle("slow");
            });
        });

        $(document).ready(function () {
            $(".post-by").on('click', function (e) {
                $(".post-slide").slideToggle("slow");
            });
        });

        $(document).ready(function () {
            $(".price_r").on('click', function (e) {
                $(".price-range-block").slideToggle("slow");
            });
        });


        $('.filter').change(function () {

            filter_checks = {
                transission:[]
            };

            var ek = $('.filter').map((_, el) => {
                if (el.checked == true) {
                    if (el.name = "transmission") {
                        console.log(el.value);
                        filter_checks.transission.push(parseInt(el.value))
                    }

                }
            }).get();



            console.log(filter_checks);

            $.ajax
            ({
                url: 'http://127.0.0.1:8000/filter/',
                data: filter_checks,
                type: 'post',
                success: function (result) {
                    console.log(result)
                    $("#carlist").html(
              "<h1><span style='color: green;'>Replaced Content"+
              "</span><br>This is the content inside the div"+
              " after changing innerHTML</h1>");
                }
            });

        });
    </script>
{% endblock %}
